{"componentChunkName":"component---src-templates-blog-post-js","path":"/prompt/","result":{"data":{"site":{"siteMetadata":{"title":"samya-ak"}},"markdownRemark":{"id":"6ebce134-1f04-57ad-9042-d9f709cac4be","excerpt":"Scenario If the description made you more confused about what this is actually about, here’s a flowchart\ndiagram for you:  Usecase You’re trying to create a…","html":"<h4>Scenario</h4>\n<p>If the description made you more confused about what this is actually about, here’s a flowchart\ndiagram for you:</p>\n<p><svg aria-roledescription=\"flowchart-v2\" role=\"graphics-document document\" viewBox=\"-8 -8 519.45703125 717.4140625\" style=\"max-width: 519.45703125px;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" id=\"mermaid-0\"><style>#mermaid-0{font-family:arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-0 .error-icon{fill:#552222;}#mermaid-0 .error-text{fill:#552222;stroke:#552222;}#mermaid-0 .edge-thickness-normal{stroke-width:2px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:#666;stroke:#666;}#mermaid-0 .marker.cross{stroke:#666;}#mermaid-0 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-0 .label{font-family:arial,sans-serif;color:#000000;}#mermaid-0 .cluster-label text{fill:#333;}#mermaid-0 .cluster-label span,#mermaid-0 p{color:#333;}#mermaid-0 .label text,#mermaid-0 span,#mermaid-0 p{fill:#000000;color:#000000;}#mermaid-0 .node rect,#mermaid-0 .node circle,#mermaid-0 .node ellipse,#mermaid-0 .node polygon,#mermaid-0 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-0 .flowchart-label text{text-anchor:middle;}#mermaid-0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-0 .node .label{text-align:center;}#mermaid-0 .node.clickable{cursor:pointer;}#mermaid-0 .arrowheadPath{fill:#333333;}#mermaid-0 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaid-0 .flowchart-link{stroke:#666;fill:none;}#mermaid-0 .edgeLabel{background-color:white;text-align:center;}#mermaid-0 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-0 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-0 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaid-0 .cluster text{fill:#333;}#mermaid-0 .cluster span,#mermaid-0 p{color:#333;}#mermaid-0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:arial,sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaid-0 .node rect{fill:#fff;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker orient=\"auto\" markerHeight=\"12\" markerWidth=\"12\" markerUnits=\"userSpaceOnUse\" refY=\"5\" refX=\"6\" viewBox=\"0 0 10 10\" class=\"marker flowchart\" id=\"mermaid-0_flowchart-pointEnd\"><path style=\"stroke-width: 1; stroke-dasharray: 1, 0;\" class=\"arrowMarkerPath\" d=\"M 0 0 L 10 5 L 0 10 z\"></path></marker><marker orient=\"auto\" markerHeight=\"12\" markerWidth=\"12\" markerUnits=\"userSpaceOnUse\" refY=\"5\" refX=\"4.5\" viewBox=\"0 0 10 10\" class=\"marker flowchart\" id=\"mermaid-0_flowchart-pointStart\"><path style=\"stroke-width: 1; stroke-dasharray: 1, 0;\" class=\"arrowMarkerPath\" d=\"M 0 5 L 10 10 L 10 0 z\"></path></marker><marker orient=\"auto\" markerHeight=\"11\" markerWidth=\"11\" markerUnits=\"userSpaceOnUse\" refY=\"5\" refX=\"11\" viewBox=\"0 0 10 10\" class=\"marker flowchart\" id=\"mermaid-0_flowchart-circleEnd\"><circle style=\"stroke-width: 1; stroke-dasharray: 1, 0;\" class=\"arrowMarkerPath\" r=\"5\" cy=\"5\" cx=\"5\"></circle></marker><marker orient=\"auto\" markerHeight=\"11\" markerWidth=\"11\" markerUnits=\"userSpaceOnUse\" refY=\"5\" refX=\"-1\" viewBox=\"0 0 10 10\" class=\"marker flowchart\" id=\"mermaid-0_flowchart-circleStart\"><circle style=\"stroke-width: 1; stroke-dasharray: 1, 0;\" class=\"arrowMarkerPath\" r=\"5\" cy=\"5\" cx=\"5\"></circle></marker><marker orient=\"auto\" markerHeight=\"11\" markerWidth=\"11\" markerUnits=\"userSpaceOnUse\" refY=\"5.2\" refX=\"12\" viewBox=\"0 0 11 11\" class=\"marker cross flowchart\" id=\"mermaid-0_flowchart-crossEnd\"><path style=\"stroke-width: 2; stroke-dasharray: 1, 0;\" class=\"arrowMarkerPath\" d=\"M 1,1 l 9,9 M 10,1 l -9,9\"></path></marker><marker orient=\"auto\" markerHeight=\"11\" markerWidth=\"11\" markerUnits=\"userSpaceOnUse\" refY=\"5.2\" refX=\"-1\" viewBox=\"0 0 11 11\" class=\"marker cross flowchart\" id=\"mermaid-0_flowchart-crossStart\"><path style=\"stroke-width: 2; stroke-dasharray: 1, 0;\" class=\"arrowMarkerPath\" d=\"M 1,1 l 9,9 M 10,1 l -9,9\"></path></marker><g class=\"root\"><g class=\"clusters\"></g><g class=\"edgePaths\"><path marker-end=\"url(#mermaid-0_flowchart-pointEnd)\" style=\"fill:none;\" class=\"edge-thickness-normal edge-pattern-solid flowchart-link LS-id1 LE-id2\" id=\"L-id1-id2-0\" d=\"M299.217,33.5L299.217,37.667C299.217,41.833,299.217,50.167,299.283,57.7C299.349,65.234,299.481,71.967,299.547,75.334L299.613,78.701\"></path><path marker-end=\"url(#mermaid-0_flowchart-pointEnd)\" style=\"fill:none;\" class=\"edge-thickness-normal edge-pattern-solid flowchart-link LS-id2 LE-id3\" id=\"L-id2-id3-0\" d=\"M256.789,200.736L241.742,213.516C226.696,226.295,196.604,251.855,181.628,269.543C166.653,287.231,166.794,297.048,166.865,301.956L166.935,306.865\"></path><path marker-end=\"url(#mermaid-0_flowchart-pointEnd)\" style=\"fill:none;\" class=\"edge-thickness-normal edge-pattern-solid flowchart-link LS-id2 LE-id4\" id=\"L-id2-id4-0\" d=\"M342.645,200.736L357.524,213.516C372.404,226.295,402.163,251.855,417.042,290.647C431.922,329.439,431.922,381.464,431.922,407.477L431.922,433.489\"></path><path marker-end=\"url(#mermaid-0_flowchart-pointEnd)\" style=\"fill:none;\" class=\"edge-thickness-normal edge-pattern-solid flowchart-link LS-id3 LE-id5\" id=\"L-id3-id5-0\" d=\"M116.976,549.879L109.403,563.843C101.829,577.807,86.682,605.736,79.109,624.525C71.535,643.314,71.535,652.964,71.535,657.789L71.535,662.614\"></path><path marker-end=\"url(#mermaid-0_flowchart-pointEnd)\" style=\"fill:none;\" class=\"edge-thickness-normal edge-pattern-solid flowchart-link LS-id3 LE-id6\" id=\"L-id3-id6-0\" d=\"M217.047,549.879L224.454,563.843C231.861,577.807,246.675,605.736,254.081,624.525C261.488,643.314,261.488,652.964,261.488,657.789L261.488,662.614\"></path></g><g class=\"edgeLabels\"><g class=\"edgeLabel\"><g transform=\"translate(0, 0)\" class=\"label\"><foreignObject height=\"0\" width=\"0\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g transform=\"translate(166.51171875, 277.4140625)\" class=\"edgeLabel\"><g transform=\"translate(-13.05078125, -9.25)\" class=\"label\"><foreignObject height=\"18.5\" width=\"26.1015625\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"edgeLabel\">Yes</span></div></foreignObject></g></g><g transform=\"translate(431.921875, 277.4140625)\" class=\"edgeLabel\"><g transform=\"translate(-10.2265625, -9.25)\" class=\"label\"><foreignObject height=\"18.5\" width=\"20.453125\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"edgeLabel\">No</span></div></foreignObject></g></g><g transform=\"translate(71.53515625, 633.6640625)\" class=\"edgeLabel\"><g transform=\"translate(-13.05078125, -9.25)\" class=\"label\"><foreignObject height=\"18.5\" width=\"26.1015625\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"edgeLabel\">Yes</span></div></foreignObject></g></g><g transform=\"translate(261.48828125, 633.6640625)\" class=\"edgeLabel\"><g transform=\"translate(-10.2265625, -9.25)\" class=\"label\"><foreignObject height=\"18.5\" width=\"20.453125\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"edgeLabel\">No</span></div></foreignObject></g></g></g><g class=\"nodes\"><g transform=\"translate(299.216796875, 16.75)\" data-id=\"id1\" data-node=\"true\" id=\"flowchart-id1-0\" class=\"node default default flowchart-label\"><rect height=\"33.5\" width=\"348.5078125\" y=\"-16.75\" x=\"-174.25390625\" ry=\"5\" rx=\"5\" style=\"\" class=\"basic label-container\"></rect><g transform=\"translate(-166.75390625, -9.25)\" style=\"\" class=\"label\"><rect></rect><foreignObject height=\"18.5\" width=\"333.5078125\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"nodeLabel\">Check if prompt needs to be shown via API call</span></div></foreignObject></g></g><g transform=\"translate(299.216796875, 163.33203125)\" data-id=\"id2\" data-node=\"true\" id=\"flowchart-id2-1\" class=\"node default default flowchart-label\"><polygon style=\"\" transform=\"translate(-79.83203125,79.83203125)\" class=\"label-container\" points=\"79.83203125,0 159.6640625,-79.83203125 79.83203125,-159.6640625 0,-79.83203125\"></polygon><g transform=\"translate(-55.58203125, -9.25)\" style=\"\" class=\"label\"><rect></rect><foreignObject height=\"18.5\" width=\"111.1640625\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"nodeLabel\">Prompt shown?</span></div></foreignObject></g></g><g transform=\"translate(166.51171875, 455.5390625)\" data-id=\"id3\" data-node=\"true\" id=\"flowchart-id3-3\" class=\"node default default flowchart-label\"><polygon style=\"\" transform=\"translate(-143.875,143.875)\" class=\"label-container\" points=\"143.875,0 287.75,-143.875 143.875,-287.75 0,-143.875\"></polygon><g transform=\"translate(-119.625, -9.25)\" style=\"\" class=\"label\"><rect></rect><foreignObject height=\"18.5\" width=\"239.25\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"nodeLabel\">Show prompt with Yes/No buttons</span></div></foreignObject></g></g><g transform=\"translate(431.921875, 455.5390625)\" data-id=\"id4\" data-node=\"true\" id=\"flowchart-id4-5\" class=\"node default default flowchart-label\"><rect height=\"33.5\" width=\"143.0703125\" y=\"-16.75\" x=\"-71.53515625\" ry=\"5\" rx=\"5\" style=\"\" class=\"basic label-container\"></rect><g transform=\"translate(-64.03515625, -9.25)\" style=\"\" class=\"label\"><rect></rect><foreignObject height=\"18.5\" width=\"128.0703125\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"nodeLabel\">Make 2nd API call</span></div></foreignObject></g></g><g transform=\"translate(71.53515625, 684.6640625)\" data-id=\"id5\" data-node=\"true\" id=\"flowchart-id5-7\" class=\"node default default flowchart-label\"><rect height=\"33.5\" width=\"143.0703125\" y=\"-16.75\" x=\"-71.53515625\" ry=\"5\" rx=\"5\" style=\"\" class=\"basic label-container\"></rect><g transform=\"translate(-64.03515625, -9.25)\" style=\"\" class=\"label\"><rect></rect><foreignObject height=\"18.5\" width=\"128.0703125\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"nodeLabel\">Make 2nd API call</span></div></foreignObject></g></g><g transform=\"translate(261.48828125, 684.6640625)\" data-id=\"id6\" data-node=\"true\" id=\"flowchart-id6-9\" class=\"node default default flowchart-label\"><rect height=\"33.5\" width=\"136.8359375\" y=\"-16.75\" x=\"-68.41796875\" ry=\"5\" rx=\"5\" style=\"\" class=\"basic label-container\"></rect><g transform=\"translate(-60.91796875, -9.25)\" style=\"\" class=\"label\"><rect></rect><foreignObject height=\"18.5\" width=\"121.8359375\"><div style=\"display: inline-block; white-space: nowrap;\" xmlns=\"http://www.w3.org/1999/xhtml\"><span class=\"nodeLabel\">Close the prompt</span></div></foreignObject></g></g></g></g></g></svg></p>\n<h4>Usecase</h4>\n<p>You’re trying to create a Company.If a company name already exists, users should be warned that\nthe company name already exists and do they really want to proceed with the same name. Company won’t be created\nif user chooses to cancel the prompt but, company with same name will be created if user chooses to proceed.</p>\n<h4>Implementation</h4>\n<p>Let’s look at some react code to see how you might go on implementing this:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>createCompanyResolver<span class=\"token punctuation\">,</span> setCreateCompanyResolver<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> boolean <span class=\"token operator\">|</span> PromiseLike<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">) => void);\n  }>(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">);</span></code></pre></div>\n<p>Here, <code class=\"language-text\">createCompanyResolver</code> is a state that will be used to resolve the promise that will be created when the prompt is shown.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> exists <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">checkCompanyNameExists</span><span class=\"token punctuation\">(</span>companyName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>exists<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Show prompt with warning</span>\n        <span class=\"token operator\">...</span>\n\n        <span class=\"token keyword\">const</span> createCompany <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">((resolve) => </span><span class=\"token punctuation\">{</span>\n          <span class=\"token function\">setCreateCompanyResolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> resolve <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">);\n\n        // Await for user to confirm if they want to create company\n        const shouldCreateCompany = await createCompany;\n        if (!shouldCreateCompany) </span><span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    }\n\n    // Proceed with creating company\n}</span></code></pre></div>\n<p>The value of <code class=\"language-text\">createCompany</code> will be resolved based on whether the user chooses to proceed (true) or cancel(false) the prompt.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WarningModal</span></span>\n        <span class=\"token attr-name\">...</span>\n        <span class=\"token comment\">// proceed is true/false based on user action</span>\n        <span class=\"token attr-name\">onUserAction</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">proceed</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>createCompanyResolver<span class=\"token punctuation\">.</span>resolve<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                createCompanyResolver<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>proceed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">...</span>\n    <span class=\"token punctuation\">/></span></span></code></pre></div>","frontmatter":{"title":"User action in between API calls","date":"August 03, 2024","description":"You need to show a prompt depending on an API call. Depending on the user's action, you need to make another subsequent API call"}},"previous":{"fields":{"slug":"/rate-limiter/"},"frontmatter":{"title":"Designing a bursty rate limiter"}},"next":null},"pageContext":{"id":"6ebce134-1f04-57ad-9042-d9f709cac4be","previousPostId":"c52a5c32-a848-5dec-9314-c329cb3e00e0","nextPostId":null}},"staticQueryHashes":["230163734","3589320610","754622331"]}