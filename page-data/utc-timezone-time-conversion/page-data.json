{"componentChunkName":"component---src-templates-blog-post-js","path":"/utc-timezone-time-conversion/","result":{"data":{"site":{"siteMetadata":{"title":"samya-ak"}},"markdownRemark":{"id":"a901fe7d-e5aa-5717-a646-c0134eb808a5","excerpt":"Let’s say you’ve stored utc time in db with a format like “17:30:00+00”. You want to convert this time in utc to time in a certain timezone. From above, you’d…","html":"<p>Let’s say you’ve stored utc time in db with a format like “17:30:00+00”. You want to convert this time in utc to time in a certain timezone.</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\">\ttimeonly <span class=\"token operator\">:=</span> <span class=\"token string\">\"17:30:00+00\"</span>\n\tlayout <span class=\"token operator\">:=</span> <span class=\"token string\">\"15:04:05-07\"</span>\n\ttz<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> time<span class=\"token punctuation\">.</span><span class=\"token function\">LoadLocation</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"America/Los_Angeles\"</span><span class=\"token punctuation\">)</span>\n\n\tt<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> time<span class=\"token punctuation\">.</span><span class=\"token function\">Parse</span><span class=\"token punctuation\">(</span>layout<span class=\"token punctuation\">,</span> timeonly<span class=\"token punctuation\">)</span>\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t in tz\"</span><span class=\"token punctuation\">,</span> t<span class=\"token punctuation\">.</span><span class=\"token function\">In</span><span class=\"token punctuation\">(</span>tz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>From above, you’d expect to get the time “10:30:00” assuming that currently it’s daylight saving time (GMT-7). But, what we get instead is: <code class=\"language-text\"> 0000-01-01 09:37:02 -0752 LMT</code></p>\n<p>The reason you get time in LMT instead of PDT is because the timezone depends on the date. What do I mean by that?</p>\n<p>If you look at the past, the way we use time zones has gradually evolved. Adoption of timezone started in 1851, before that Local Mean Time was used (LMT). Also, Many countries and regions have implemented DST at various points in history, and the start and end dates for DST have often changed. So, it is crucial that we include dates when doing timezone conversion. Since we didn’t explicitly provide a date before parsing the date string, it defaulted to 0000-01-01. The Go library might not have accurate historical data for such an ancient date. Therefore, it fell back to using Local Mean Time (LMT).</p>\n<p>Following snippet might be the solution you’re looking for:</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\">    timeonly <span class=\"token operator\">:=</span> <span class=\"token string\">\"17:30:00+00\"</span>\n    timeanddate <span class=\"token operator\">:=</span> fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s %s\"</span><span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">.</span><span class=\"token function\">Now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2006-01-02\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> timeonly<span class=\"token punctuation\">)</span>\n    layout <span class=\"token operator\">:=</span> <span class=\"token string\">\"2006-01-02 15:04:05-07\"</span>\n\n    tz<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> time<span class=\"token punctuation\">.</span><span class=\"token function\">LoadLocation</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"America/Los_Angeles\"</span><span class=\"token punctuation\">)</span>\n\n    t<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> time<span class=\"token punctuation\">.</span><span class=\"token function\">Parse</span><span class=\"token punctuation\">(</span>layout<span class=\"token punctuation\">,</span> timeanddate<span class=\"token punctuation\">)</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t in tz\"</span><span class=\"token punctuation\">,</span> t<span class=\"token punctuation\">.</span><span class=\"token function\">In</span><span class=\"token punctuation\">(</span>tz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Which gives something like <code class=\"language-text\">2023-10-01 10:30:00 -0700 PDT</code>. Now, you can format this time struct to get only time, or replace date to your desired date to do date time comparisons.</p>","frontmatter":{"title":"Convert UTC time to time in a timezone","date":"October 01, 2023","description":"How to convert time '17:30:00+00' to time in a timezone?"}},"previous":{"fields":{"slug":"/protected-routes-in-nextjs/"},"frontmatter":{"title":"Protected routes in next.js"}},"next":{"fields":{"slug":"/stow/"},"frontmatter":{"title":"Manage dotfiles using stow"}}},"pageContext":{"id":"a901fe7d-e5aa-5717-a646-c0134eb808a5","previousPostId":"59eb8968-26d2-5b1b-9f2f-adf838e07260","nextPostId":"53619caa-b9c0-526b-bc12-bd18d8cb24ab"}},"staticQueryHashes":["230163734","3589320610","754622331"]}